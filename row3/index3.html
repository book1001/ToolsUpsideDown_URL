<!doctype html>
<html>
<head>
  <title>TUD projects</title>
  
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <!-- Basal ‚Äì adj. forming or belonging to a bottom layer or base. -->
  <!-- üö® NOTE üö® -->
  <!-- This is for instructional purposes. -->
  <!-- While you can technically use this for an actual website, -->
  <!-- it serves you best as inspiration. -->
  <base target="_blank">
  
  <!--  This is for routing  -->
  <script src="//unpkg.com/navigo"></script>

  <!-- Feel free to delete this, just some sane style defaults -->
  <!-- <link rel="stylesheet" href="https://unpkg.com/modern-css-reset/dist/reset.min.css" /> -->
  
  <!-- css -->
  <link rel="stylesheet" href="index.css">
  <link rel="stylesheet" href="font.css">

</head>

<body>
  <script>
    // localStorage.clear();

    // Clear Cookies
    function deleteAllCookies() {
        const cookies = document.cookie.split(";");

        for (let i = 0; i < cookies.length; i++) {
            const cookie = cookies[i];
            const eqPos = cookie.indexOf("=");
            const name = eqPos > -1 ? cookie.substr(0, eqPos) : cookie;
            document.cookie = name + "=;expires=Thu, 01 Jan 1970 00:00:00 GMT";
        }
    }

    // var cname = "id";
    // var expireday = new Date();
    // expireday.setDate(expireday.getDate()-10);//ÌòÑÏû¨ ÏãúÍ∞ÑÏúºÎ°úÎ∂ÄÌÑ∞ 10Ïùº Ï†Ñ ÎÇ†Ïßú
    // document.cookie = cname + "=; expires="+ expireday.toUTCString() +";";
    // //idÏù¥Î¶Ñ Í∞ñÎäî Ïø†ÌÇ§ ÌååÍ∏∞
    
    // 1 hour
    window.onload = function() {
      // document.cookie = `snack=chips; path=/; max-age=${1 * 1}`; 
      var theCookies = document.cookie.split(';');
      for (var i = 1 ; i <= theCookies.length; i++) {
          var acookie = theCookies[i-1];
          var cookieArr = acookie.split('=');
          console.log(cookieArr[0]);
          document.cookie = cookieArr[0]+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
      }

      // Get cache storage and clear cache storage
      window.caches.keys().then(function(names) {
          for (let name of names)
              window.caches.delete(name);
      });

      // Get indexed db and delete indexed db
      const dbs = await window.indexedDB.databases()
      dbs.forEach(db => { window.indexedDB.deleteDatabase(db.name) })

      // clear localStorage
      window.localStorage.clear();

      // clear sessionStorage
      window.sessionStorage.clear();
     }
  </script>
  
  
  <script type="module">  
  window.addEventListener("load", () => {
    // Replace this with your channel slug 
    // (i.e. in https://www.are.na/charles-broskoski/on-gathering-ftmpeeykqm0 ..the last part)
    let channelSlug = 'test-vm8u0apfldw';
    // let channelSlug = 'on-gathering-ftmpeeykqm0';
    
    function renderChannel(slug) {
      // Add a loading message
      let loading = `Loading...`;
      document.body.innerHTML = loading;      

      let contentsURL = `https://api.are.na/v2/channels/${slug}?sort=position&order=asc&per=100`;

      // Fetch the channel data from the Are.na API
      fetch(contentsURL)
        // Grab the response in JSON
        .then(response => response.json())

        // Now we can channel data into content by mixing it with HTML
        .then((channel) => {

          document.title = channel.title;
          const contents = channel.contents.reverse();

          // We are going to replace the inner html of our document
          // with our own constructued HTML
        
          // document.body.innerHTML = `
          // <div class="ChannelInfo">
          //   <h1>‚Äì${channel.title}</h1>      
          // </div>
          document.body.innerHTML = `
            <div class="ChannelInfo">
              <h3>Projects</h3>
              <p style="padding-bottom: 10px;">The tools we use form our world, just as the invention of the camera, the synthesizer, and the smartphone led to a huge change in the way we see and hear, contemporary tools like the iPhone, zoom, and 3D scanner, are changing our world.</p>
              <div style="display: grid; grid-template-columns: 1fr 1fr; column-gap: 20px; row-gap: 20px;">
                <p>
                  ‚ûä The World without Design Tools<br>
                  ‚ûã Latent Medium as Tools<br>
                  ‚ù∏ How To Tweak
                </p>
                <p>
                  ‚ûç How To Represent<br>
                  ‚ûé Image Operations<br>
                  ‚ûè Final Project
                </p>
              </div>
              <br>
              <a href="https://www.are.na/halim-lee/test-vm8u0apfldw"><h3>‚Äì‚ÄâAre.na</h3></a>        
            </div>
            
            

            <div class="ChannelContents">
              ${channel.contents.map((block) => {
                // First, we will loop through the contents of the channel.
                // Each block will be an object.

                // An example block:
                // 
                // {
                //   "id": 76969,
                //   "title": "The Working Sheepdog ( Border Collies ) in training",
                //   "updated_at": "2020-04-07T21:59:29.806Z",
                //   "created_at": "2013-02-12T22:40:15.696Z",
                //   "state": "available",
                //   "comment_count": 0,
                //   "generated_title": "The Working Sheepdog ( Border Collies ) in training",
                //   "content_html": "",
                //   "description_html": "<p>Border Collie Collies working sheepdog Sheep dogs in training Scotland</p>",
                //   "visibility": "public",
                //   "content": "",
                //   "description": "Border Collie Collies working sheepdog Sheep dogs in training Scotland",
                //   "source": {},
                //   "image": {},
                //   "embed": {},
                //   "attachment": null,
                //   "metadata": null,
                //   "base_class": "Block",
                //   "class": "Media",
                //   "user": {},
                //   "position": 1,
                //   "selected": false,
                //   "connection_id": 716562,
                //   "connected_at": "2016-05-16T00:59:42.901Z",
                //   "connected_by_user_id": 128,
                //   "connected_by_username": "Chris Sherr√≥n",
                //   "connected_by_user_slug": "chris-sherron"
                // },

                // We are going to return HTML, mixed in with the data from the block.
                return `
                  <div class="Block ${block.class}">

                    ${(() => {
                      if (block.title && block.class !== 'Link' && block.class !== 'Channel') {
                        return `<strong class="Block__title">${block.title}</strong>`;
                      }

                      return ``;
                    })()}


                    ${(() => {
                      // Return a different bit of HTML, depending on what type of block it is
                      switch (block.class) {
                          
                        case "Image":
                          return `
                          <a href="https://www.are.na/block/${block.id}">
                            <img class="BlockInner__Image" src="${block.image.large.url}"/>
                            <p style="max-height: 90px; overflow-y:auto;">
                              ${block.description}
                            </p>
                          </a>
                          `;
                          
                        case "Text":
                          return `<div class="BlockInner__Text">${block.content_html}</div>`;
                        case "Attachment":
                    
                        case "Link":
                          return `
                          <a href="${block.source && block.source.url}" class="BlockInner__Link">
                            ‚Äì ${block.title}
                          </a>`;
                          
                        case "Media":
                          return `
                          <div class="BlockInner__Media">${block.embed.html}</div>
                          <a href="https://www.are.na/block/${block.id}"><p>‚Äì‚ÄâPlay on Are.na</></a>
                          `;
                          
                        case "Channel":
                          return `<a href="#/channel/${block.slug}" class="BlockInner__Channel" data-navigo>${block.title}</a>`;
                      }
                    })()}
                  </div>
                `;
              }).join("")}
            </div>
          `
        })
      }

    // This will handle our routes
    const router = new Navigo("/", { hash: true });
    router
      .on("/channel/:slug", (match) => { renderChannel(match.data.slug) })
      .on(() => { renderChannel(channelSlug) })
      .resolve();
  });

</script>
 
  <script>
    // localStorage.clear();

    // Clear Cookies
    function deleteAllCookies() {
        const cookies = document.cookie.split(";");

        for (let i = 0; i < cookies.length; i++) {
            const cookie = cookies[i];
            const eqPos = cookie.indexOf("=");
            const name = eqPos > -1 ? cookie.substr(0, eqPos) : cookie;
            document.cookie = name + "=;expires=Thu, 01 Jan 1970 00:00:00 GMT";
        }
    }

    // var cname = "id";
    // var expireday = new Date();
    // expireday.setDate(expireday.getDate()-10);//ÌòÑÏû¨ ÏãúÍ∞ÑÏúºÎ°úÎ∂ÄÌÑ∞ 10Ïùº Ï†Ñ ÎÇ†Ïßú
    // document.cookie = cname + "=; expires="+ expireday.toUTCString() +";";
    // //idÏù¥Î¶Ñ Í∞ñÎäî Ïø†ÌÇ§ ÌååÍ∏∞
    
    // 1 hour
    window.onload = function() {
      // document.cookie = `snack=chips; path=/; max-age=${1 * 1}`; 
      var theCookies = document.cookie.split(';');
      for (var i = 1 ; i <= theCookies.length; i++) {
          var acookie = theCookies[i-1];
          var cookieArr = acookie.split('=');
          console.log(cookieArr[0]);
          document.cookie = cookieArr[0]+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
      }

      // Get cache storage and clear cache storage
      window.caches.keys().then(function(names) {
          for (let name of names)
              window.caches.delete(name);
      });

      // Get indexed db and delete indexed db
      const dbs = await window.indexedDB.databases()
      dbs.forEach(db => { window.indexedDB.deleteDatabase(db.name) })

      // clear localStorage
      window.localStorage.clear();

      // clear sessionStorage
      window.sessionStorage.clear();
     }
  </script>
<!-- <script>
  document.querySelectorAll("p").forEach(element => {
    let text = element.innerHTML;
    element.innerHTML = text.replace("https://instagram.com/", "@");
  });
</script> -->
  
</body>

</html>
